repos:
  - repo: local
    hooks:
      - id: check-anonymity
        name: "[01/13] Anonimato"
        language: system
        entry: bash src/tools/check_anonymity.sh
        pass_filenames: false
        always_run: true

      - id: check-external-ids
        name: "[02/13] IDs Externos"
        language: system
        entry: bash src/tools/check_external_ids.sh
        pass_filenames: false
        always_run: true

      - id: check-test-data
        name: "[03/13] Dados de teste"
        language: system
        entry: bash src/tools/check_test_data.sh
        pass_filenames: false
        always_run: true

      - id: check-tests-exist
        name: "[04/13] Testes existem"
        language: system
        entry: bash src/tools/check_tests_exist.sh
        pass_filenames: false
        always_run: true

      - id: check-test-quality
        name: "[05/13] Qualidade dos testes"
        language: system
        entry: bash src/tools/check_test_quality.sh
        pass_filenames: false
        stages: [pre-push]

      - id: no-silent-except
        name: "[06/13] Except silenciosos"
        language: system
        entry: bash src/tools/check_silent_except.sh
        pass_filenames: false
        always_run: true

      - id: no-manual-lock-acquire
        name: "[07/13] Lock manual"
        language: system
        entry: bash src/tools/check_manual_lock.sh
        pass_filenames: false
        always_run: true

      - id: check-file-size
        name: "[08/13] God Mode Prevention (max 300 linhas)"
        language: system
        entry: bash src/tools/check_file_size.sh
        pass_filenames: false
        always_run: true

      # - id: check-new-script-docs
      #   name: "[09/13] Novos scripts documentados"
      #   language: system
      #   entry: bash src/tools/check_new_script_docs.sh
      #   pass_filenames: false
      #   always_run: true

      - id: check-orphan-code
        name: "[10/17] Codigo orfao"
        language: system
        entry: bash src/tools/check_orphan_code.sh
        pass_filenames: false
        stages: [pre-push]

      - id: check-logger-usage
        name: "[11/17] Logger obrigatorio"
        language: system
        entry: bash src/tools/check_logger_usage.sh
        pass_filenames: false
        always_run: true

      - id: check-docstrings
        name: "[12/17] Docstrings"
        language: system
        entry: bash src/tools/check_docstrings.sh
        pass_filenames: false
        always_run: true


      - id: check-type-hints
        name: "[13/17] Type hints"
        language: system
        entry: bash src/tools/check_type_hints.sh
        pass_filenames: false
        stages: [pre-push]

      - id: check-complexity
        name: "[14/18] Complexidade ciclomatica"
        language: system
        entry: bash src/tools/check_complexity.sh
        pass_filenames: false
        stages: [pre-push]

      - id: validate-docs
        name: "[15/18] Documentacao atualizada"
        language: system
        entry: bash scripts/validate_docs.sh
        pass_filenames: false
        always_run: true


  - repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.8.4
    hooks:
      - id: ruff
        name: "[16/18] Ruff lint (erros criticos)"
        args: ["--fix", "--exit-non-zero-on-fix", "--select", "E9,F63,F7,F82"]
      - id: ruff-format
        name: "[17/18] Ruff format"

  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v5.0.0
    hooks:
      - id: trailing-whitespace
        name: "[18/18] Trailing whitespace"
      - id: end-of-file-fixer
      - id: check-yaml
      - id: check-json
      - id: check-added-large-files
        args: ['--maxkb=1000']
        exclude: '^assets/.*'
      - id: check-merge-conflict
      - id: detect-private-key
